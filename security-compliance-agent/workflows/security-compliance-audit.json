{
  "name": "security-compliance-audit",
  "description": "Comprehensive security and compliance assessment workflow",
  "schedule": {
    "cron": "0 3 * * *",
    "timezone": "UTC"
  },
  "steps": [
    {
      "name": "scan_aws_compliance",
      "type": "data_query",
      "datasource": "aws_config",
      "query": "Get AWS Config compliance status for all rules"
    },
    {
      "name": "assess_azure_security",
      "type": "data_query",
      "datasource": "azure_security_center",
      "query": "Get Azure Security Center assessments and recommendations"
    },
    {
      "name": "identify_security_risks",
      "type": "analysis",
      "input": ["scan_aws_compliance", "assess_azure_security"],
      "criteria": {
        "risk_threshold": "medium",
        "compliance_score_threshold": 80,
        "prioritize_critical_assets": true
      }
    },
    {
      "name": "calculate_compliance_scores",
      "type": "analysis",
      "input": ["identify_security_risks"],
      "criteria": {
        "frameworks": ["SOC2", "PCI-DSS", "HIPAA"],
        "weighting": "business_impact"
      }
    },
    {
      "name": "generate_compliance_report",
      "type": "report_generation",
      "template": "security_compliance_summary",
      "input": ["calculate_compliance_scores"]
    },
    {
      "name": "send_security_alert",
      "type": "notification",
      "datasource": "slack",
      "input": ["generate_compliance_report"]
    }
  ]
}